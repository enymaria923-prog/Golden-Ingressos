app/publicar-evento/FormularioPublicacao.js
'use client';

import { useFormStatus } from 'react-dom';

function SubmitButton() {
    // Hook do React que rastreia o estado de envio do formulário
    const { pending } = useFormStatus();

    return (
        <button 
            type="submit"
            disabled={pending} // Desabilita o botão durante o envio
            style={{ 
                backgroundColor: pending ? '#ccc' : '#f1c40f', // Muda cor para indicar carregamento
                color: 'black', 
                padding: '15px', 
                fontWeight: 'bold', 
                border: 'none', 
                fontSize: '16px',
                display: 'block', 
                width: '100%',
                cursor: pending ? 'not-allowed' : 'pointer', // Muda cursor
                transition: 'background-color 0.3s',
            }}
        >
            {pending ? 'Publicando...' : 'Publicar Evento'}
        </button>
    );
}

export default function FormularioPublicacao({ criarEventoAction, userEmail }) {
    return (
        <form 
            action={criarEventoAction} 
            style={{ 
                maxWidth: '800px', 
                margin: '40px auto', 
                padding: '30px', 
                backgroundColor: 'white', 
                borderRadius: '8px',
                display: 'flex', 
                flexDirection: 'column', 
                gap: '20px', 
                marginTop: '20px' 
            }}
        >
            <p style={{ margin: '0' }}>Logado como: {userEmail}</p>

            <label htmlFor="nome">Nome do Evento:</label>
            <input id="nome" name="nome" type="text" style={{ padding: '10px', border: '1px solid #ddd', borderRadius: '4px' }} required />

            <label htmlFor="capa">Capa do Evento (Imagem):</label>
            <input id="capa" name="capa" type="file" accept="image/*" style={{ padding: '10px', border: '1px solid #ddd', borderRadius: '4px' }} required />
            
            <label htmlFor="categoria">Categoria:</label>
            <select id="categoria" name="categoria" style={{ padding: '10px', border: '1px solid #ddd', borderRadius: '4px' }} required>
                <option value="">Selecione...</option>
                <option value="Show">Show</option>
                <option value="Teatro">Teatro</option>
                <option value="Standup">Stand-up</option>
                <option value="Congresso">Congresso</option>
                <option value="Outro">Outro</option>
            </select>
            
            <label htmlFor="data">Data:</label>
            <input id="data" name="data" type="date" style={{ padding: '10px', border: '1px solid #ddd', borderRadius: '4px' }} required />
            
            <label htmlFor="hora">Hora:</label>
            <input id="hora" name="hora" type="time" style={{ padding: '10px', border: '1px solid #ddd', borderRadius: '4px' }} required />
            
            <label htmlFor="local">Local (Endereço completo):</label>
            <input id="local" name="local" type="text" style={{ padding: '10px', border: '1px solid #ddd', borderRadius: '4px' }} required />
            
            <label htmlFor="preco">Preço (Ex: 50,00 ou "Gratuito"):</label>
            <input id="preco" name="preco" type="text" style={{ padding: '10px', border: '1px solid #ddd', borderRadius: '4px' }} required />
            
            <label htmlFor="descricao">Descrição do Evento:</label>
            <textarea id="descricao" name="descricao" rows="5" style={{ padding: '10px', border: '1px solid #ddd', borderRadius: '4px' }}></textarea>

            {/* O BOTÃO AGORA É SEPARADO PARA USAR useFormStatus */}
            <SubmitButton />

        </form>
    );
}
